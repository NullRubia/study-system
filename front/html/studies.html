<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <title>ìŠ¤í„°ë”” ëª©ë¡</title>
  </head>
  <body>
    <h2>ğŸ“‹ ìŠ¤í„°ë”” ëª©ë¡</h2>
    <button onclick="location.href='studycreate.html'">ìŠ¤í„°ë”” ê°œì„¤</button>
    <button onclick="location.href='mypage.html'">ë§ˆì´í˜ì´ì§€ë¡œ</button>
    <button onclick="location.href='login.html'">ë¡œê·¸ì•„ì›ƒ</button>
    <ul id="studyList"></ul>

    <script>
      const token = localStorage.getItem("token");
      if (!token) location.href = "login.html";

      async function loadStudies() {
        const res = await fetch("http://localhost:8080/studies");
        const studies = await res.json();

        const list = document.getElementById("studyList");
        list.innerHTML = "";

        studies.forEach((s) => {
          const li = document.createElement("li");
          li.innerHTML = `
          <a href="studyview.html?id=${s.id}">${s.title}</a> 
          (ì‘ì„±ì: ${s.writerUserid}, ë§ˆê°ì¼: ${s.deadline})
        `;
          list.appendChild(li);
        });
      }

      loadStudies();
    </script>
  </body>
</html>
